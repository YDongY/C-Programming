# 指针

## 指针定义

```c
----------------------------------------------
| 变量 |   内存地址    |         字节           |
----------------------------------------------
|     |0x7ffd822cbe48|  |  |  |  |  |  |  |  |  \
|     |0x7ffd822cbe49|  |  |  |  |  |  |  |  |   \
| b   |0x7ffd822cbe4A|  |  |  |  |  |  |  |  |   / 32bit <---
|     |0x7ffd822cbe4B|  |  |  |  |  |  |  |  |  /           |
----------------------------------------------              |
                                                            |
0x7fff7e7433e0(p)                 0x7ffd822cbe48(b)         |
--------------------              ---------------           |
| 0x7ffd822cbe48   |  --------->  |     10      |------------
--------------------              ---------------

int b = 10;
printf("%p \n", &b); // 0x7ffd822cbe48

// 指针类型的变量 p 存放 整型变量 b 的内存地址
int *p = &b; // int * 表示指针类型，p 是变量名
printf("%p\n", p); // 0x7ffd822cbe48，获取地址
printf("%d\n", *p); // 10，获取地址存储的数据

// 打印指针 p 的内存地址
printf("%p\n", &p); // 0x7fff7e7433e0，指针的地址

// 指针类型大小 8 字节
printf("%lu\n", sizeof(int *)); // 8 ,32位 4 字节，64 位　8 字节


// 通过指针修改变量 b
*p = 20;
printf("%d \n", b); // 20
```

## 野指针

```c
int *p;
*p = 1000;
```

## 空指针

```c
int *c = NULL;
*c = 1000;
```

## 万能指针、泛型指针

> 可以接收任意变量地址，使用时需要**强转**

```c
int num = 345;
void *c;

c = &num;
printf("%d \n",*(int *)c);
```

## 指针与数组

```c
int arr[] = {1, 2, 3};
printf("%p \n", arr); // 0x7fff48cf3bbc 数组名是地址

--------------------------------------------------------
| 0x7fff48cf3bbc |  0x7fff48cf3bc1 |   0x7fff48cf3bc5  | // 一个值四个字节大小
--------------------------------------------------------
|    1           |       2         |       3           |
--------------------------------------------------------
     arr[0]            arr[1]            arr[2]
     *(arr+0)          *(arr+1)          *(arr+2) 

for (int i = 0; i < 3; i++) {
    printf("%d \t", *(arr + i)); // arr[i]
}

int *p = arr; // 利用 *p 替代
for (int i = 0; i < 3; i++) {
    printf("%d \t", p[i]); // *(p+i)
}
```

## 指针 ++

```c
int arr[] = {1, 2, 3};
int *p = arr; // 利用 *p 替代
for (int i = 0; i < 3; i++) {
    printf("%d \t", *p); // 1 2 3
    p++; //　地址向后加 int 指针类型的大小，即 4 字节
}
```

## 数据类型对指针作用

> 决定了从指针存储的地址开始，向后读取的字节数，与指针本身存储空间无关

```c
int a = 12345678;
int *p = &a;
printf("%d \n",*p); // 12345678

char *p3 = &a;
printf("%d \n",*p3); // 78
```

## 指针运算

```c
int a = 10;
char *p3 = &a;

printf("%p \n",p3); // 0x7fff5bff399c
printf("%p \n",p3+1); // 0x7fff5bff399d 向后一个字节

/** 指针 + - 整数：
            char *p: p 和 p+1 偏移 1 字节,即 char 类型大小 
            short *p: p 和 p+1 偏移 2 字节,即 short 类型大小 
            int *p: p 和 p+1 偏移 4 字节,即 int 类型大小 

    指针 * / %: 错误
    
    指针 + -：
        指针 + 指针: 错误
        指针 - 指针: 不报错，无意义
        数组：
            int a[10] = {1,2,3,4,5,6,7,8,9,0};
            int *p = &a[3];
            
            p - a = 2; // p 指向 3 ,a 指向 1 ，p-a 表示偏移个数
            
    指针比较运算：
        int a[10] = {1,2,3,4,5,6,7,8,9,0};
        int *p = &a[3]; 
        p > a
*/
```

## 指针数组

```c
#include "stdio.h"

int main(int argc, char const *argv[]) {
    int a = 10;
    int b = 20;
    int c = 30;

    int *p1 = &a;
    int *p2 = &b;
    int *p3 = &c;

    int *arr[] = {p1, p2, p3}; // 整型指针数组

    printf("%d \n", *(arr[0])); // 10
    printf("%d \n", *(*(arr + 0))); // 10
    printf("%d \n", *(*arr)); // 10
    printf("%d \n", **arr); // 10 ，指针数组就是二级指针

}
```

## 多级指针

```c
int a = 0;
int *p = &a; // 一级指针
int **pp = &p; // 二级指针
int ***ppp = &pp; // 三级指针
```